<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="css/owl.carousel.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="css/select2.min.css">
	<link rel="stylesheet" href="css/plyr.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/members.css">
	<link rel="stylesheet" href="css/icomoon.css" />
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
	<!-- Favicons -->
	<link rel="icon" type="image/png" href="icon/favicon.png" sizes="32x32">
	<title>Thaalam - Signup</title>
	<meta name="robots" content="noindex" />
	<style>
		.select2-container {
			width: 100% !important;
			background: #ffffff;
			padding: 10px;
			border: 1px solid
		}

		.mfp-iframe-holder .mfp-content {
			height: 100% !important
		}

		.mfp-container {
			padding: 40px 15px !important
		}

		a {
			text-decoration: none;
		}
	</style>


	<!-- Google Tag Manager -->
	<script>(function (w, d, s, l, i) {
			w[l] = w[l] || []; w[l].push({
				'gtm.start':
					new Date().getTime(), event: 'gtm.js'
			}); var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
					'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-KLC938NV');</script>
	<!-- End Google Tag Manager -->

</head>

<body style="background:url('img/background.jpg'); background-size:cover">
	<!-- Google Tag Manager (noscript) -->
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLC938NV" height="0" width="0"
			style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->
	<!-- header -->
	<!-- header -->

	<!-- header -->

	<header class="header">

		<div class="header__content">
			<div class="header__logo">
				<a href="./">
					<img src="img/thalam-logo.png" alt="" />
				</a>
			</div>

			<div id="commonnavbar" style="margin-right:10px;  text-align: end;"></div>

			<script>

			</script>

			<!-- <div id="commonnavbar2"  style="  text-align: end;"></div> -->

			<div class="header__action header__action--signin" style="width:55%;    margin-right: 30px;"
				id="commonnavbar3"></div>
			<!-- <div class="header__action-btn" style="width:75%;    margin-right: 35px;">
		<a class="header__action-btn" href="signin">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,4.65,18.76h0a10,10,0,0,0,14.7,0h0A10,10,0,0,0,12,2Zm0,18a8,8,0,0,1-5.55-2.25,6,6,0,0,1,11.1,0A8,8,0,0,1,12,20ZM10,10a2,2,0,1,1,2,2A2,2,0,0,1,10,10Zm8.91,6A8,8,0,0,0,15,12.62a4,4,0,1,0-6,0A8,8,0,0,0,5.09,16,7.92,7.92,0,0,1,4,12a8,8,0,0,1,16,0A7.92,7.92,0,0,1,18.91,16Z"></path></svg>
		</a>
	  </div>
	  <div id="commonnavbar3"></div> -->

			<a href="./contact">
				<div class="phone-number phone-number--below">
					<img class="fa" src="icon/phone.png" />
					<span style="color: #f60001">Reach Us</span> <br />
					<span style="font-weight: initial">+41 79 288 22 71</span>
				</div>
			</a>
			<button class="header__btn" type="button">
				<span></span>
				<span></span>
				<span></span>
			</button>
		</div>
	</header>
	<!-- end header -->
	<!-- end sidebar -->
	<!-- sidebar -->
	<div class="sidebar" style="background: url('img/background.jpg'); background-size: cover">
		<!-- sidebar logo -->
		<div class="sidebar__logo">
			<a href="./"><img src="img/thalam-logo.png" alt="" /></a>
		</div>
		<!-- end sidebar logo -->

		<!-- sidebar nav -->
		<ul class="sidebar__nav" id="menucontent1">

		</ul>
		<!-- end sidebar nav -->
	</div>
	<!-- end sidebar -->

	<!-- end header -->

	<!-- main content -->
	<main class="main">
		<div class="container-fluid">
			<div class="row row--grid">
				<!-- breadcrumb -->
				<div class="col-12">
					<ul class="breadcrumb">
						<li class="breadcrumb__item"><a href="index">Home</a></li>
						<li class="breadcrumb__item breadcrumb__item--active">Sign up</li>
					</ul>
				</div>
				<!-- end breadcrumb -->

				<!-- registration form -->
				<div class="col-12 mt-4">
					<div class="sign">
						<div class="sign__content">
							<form action="#" class="sign__form">
								<div class="main__title" style="margin-bottom: 23px;">
									<h2>Member Sign up</h2>
								</div><br>

								<div class="row">
									<div class="col-12 col-md-6">
										<div class="sign__group">
											<label for="signupname" class="sign__label">Name</label>
											<input type="text" id="signupname" class="sign__input"
												placeholder="Enter your name">
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupgender" class="sign__label">Gender</label>
											<select id="signupgender" class="sign__select">
												<option value="">Select Gender</option>
												<option value="Male">Male</option>
												<option value="Female">Female</option>
												<option value="Other">Others</option>
											</select>
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupaddress1" class="sign__label">Address 1</label>
											<input type="text" id="signupaddress1" class="sign__input"
												placeholder="Enter Address 1">
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupaddress2" class="sign__label">Address 2</label>
											<input type="text" id="signupaddress2" class="sign__input"
												placeholder="Enter Address 2">
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupcountry" class="sign__label">Country</label>
											<select onchange="getStates()" id="signupcountry" class="sign__select">
												<option value="">-- Select Country --</option>
											</select>
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupstate" class="sign__label">State</label>
											<select onchange="getCities()" id="signupstate" class="sign__select">
												<option value="">-- Select State --</option>
											</select>
										</div>
									</div>

									<div class="col-12 col-md-6 col-xl-6">
										<div class="sign__group">
											<label for="signupcity" class="sign__label">City</label>
											<select id="signupcity" class="sign__select">
												<option value="">-- Select City --</option>
											</select>
										</div>
									</div>

									<div class="col-12 col-md-6">
										<div class="sign__group">
											<label for="signupmobile" class="sign__label">Mobile</label>
											<input type="text" id="signupmobile" class="sign__input"
												placeholder="Mobile" oninput="handleInput(this);" maxlength="16"
												pattern="[0-9]{4}-[0-9]{4}-[0-9]{4}">
										</div>
									</div>

									<div class="col-12 col-md-6">
										<div class="sign__group">
											<label for="signupemail" class="sign__label">Email</label>
											<input type="text" id="signupemail" class="sign__input" placeholder="Email">
										</div>
									</div>

									<div class="col-12 col-md-6">
										<div class="sign__group" style="position: relative;">
											<label for="signuppassword" class="sign__label">Password</label>
											<input type="password" id="signuppassword" class="sign__input"
												placeholder="Password">
											<i id="togglePasswordIcon" class="icon-eye" onclick="togglePassword()"
												style="position: absolute; top: 45px; right: 20px; cursor: pointer;"></i>
										</div>
									</div>

									<div class="col-12" style="text-align: center;">
										<button class="sign__btn" onclick="signup()" type="button">Sign up</button>
									</div>

									<span class="sign__text">Already have an account? <a href="#"
											onclick="SignIn()">Sign in!</a></span>
								</div>
							</form>
						</div>
					</div>
				</div>
				<!-- end registration form -->
			</div>
		</div>
	</main>

	<!-- end main content -->


	<!-- footer -->
	<div id="commonfooter">

	</div>


	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/select2.min.js"></script>
	<script src="js/jquery.inputmask.min.js"></script>
	<script src="js/plyr.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
	<script src="js/main.js"></script>
	<script type="text/javascript" src="js/menu.js"></script>
	<script>
		$(function () {
			$("#commonheader").load("./header");
			$("#commonfooter").load("./footer");
			setTimeout(() => {
				SetLogin1();
			}, 1000);
		});
	</script>
	<script>

		function SignIn() {
			const urlParams = new URLSearchParams(window.location.search);
			const myParam = urlParams.get('redirect_url');
			if (myParam) {
				window.location.href = 'signin?redirect_url=' + myParam;
			} else {
				window.location.href = 'signin';
			}
		}
		function togglePassword() {
			const passwordInput = document.getElementById("signuppassword");
			const toggleIcon = document.getElementById("togglePasswordIcon");

			if (passwordInput.type === "password") {
				passwordInput.type = "text";
				toggleIcon.classList.remove("icon-eye");
				toggleIcon.classList.add("icon-eye-off");
			} else {
				passwordInput.type = "password";
				toggleIcon.classList.remove("icon-eye-off");
				toggleIcon.classList.add("icon-eye");
			}
		}
		window.onload = function () {
			menucontent();
			fetch('./mobileApi/country.php')
				.then((res) => res.json())
				.then((response) => {
					if (response.status === 'error') {
						errorToast(response.message);
						return;
					}
					const country = document.getElementById('signupcountry');
					country.innerHTML = "<option>-- Select Country --</option>";
					response.items.forEach(element => {
						country.innerHTML += `<option value='${element.name}' data-id='${element.id}'>${element.name}</option>`;
					});
				});
		};

		function getStates() {
			const countrySelect = document.getElementById('signupcountry');
			const selectedOption = countrySelect.options[countrySelect.selectedIndex];
			const countryId = selectedOption.getAttribute('data-id');

			if (!countryId) {
				return;
			}

			const state = document.getElementById('signupstate');
			state.innerHTML = "<option>-- Select State --</option>";

			fetch('./mobileApi/state.php', {
				method: 'POST',
				body: JSON.stringify({
					countryid: countryId
				})
			})
				.then((res) => res.json())
				.then((response) => {
					if (response.status === 'error') {
						errorToast(response.message);
						return;
					}
					response.items.forEach(element => {
						state.innerHTML += `<option value='${element.name}' data-id='${element.id}'>${element.name}</option>`;
					});
				});
		}

		function getCities() {
			const stateSelect = document.getElementById('signupstate');
			const selectedOption = stateSelect.options[stateSelect.selectedIndex];
			const stateId = selectedOption.getAttribute('data-id');

			if (!stateId) {
				return;
			}

			const city = document.getElementById('signupcity');
			city.innerHTML = "<option>-- Select City --</option>";

			fetch('./mobileApi/city.php', {
				method: 'POST',
				body: JSON.stringify({
					stateid: stateId
				})
			})
				.then((res) => res.json())
				.then((response) => {
					if (response.status === 'error') {
						errorToast(response.message);
						return;
					}
					response.items.forEach(element => {
						city.innerHTML += `<option value='${element.name}'>${element.name}</option>`;
					});
				});
		}

		$(function () {
			$("#otpsend").click(function () {
				errorToast("OTP Sent Successfully");
				return;
			});
		});

		function signup() {
			const name = document.getElementById('signupname').value;
			const gender = document.getElementById('signupgender').value;
			const address1 = document.getElementById("signupaddress1").value;
			const address2 = document.getElementById("signupaddress2").value;
			const country = document.getElementById('signupcountry').value;
			const state = document.getElementById('signupstate').value;
			const city = document.getElementById('signupcity').value;
			const email = document.getElementById('signupemail').value;

			const prefix = "+41 ";
			const storedNumber = document.getElementById('signupmobile').value;
			const mobile = storedNumber.replace(/\D/g, '').slice(prefix.replace(/\D/g, '').length);
			const password = document.getElementById('signuppassword').value;

			if (!name) {
				errorToast("Enter valid name");
				return;
			} else if (!gender) {
				errorToast("Select valid gender");
				return;
			} else if (!address1) {
				errorToast("Enter Valid Address 1");
				return;
			} else if (!address2) {
				errorToast("Enter Valid Address 2");
				return;
			} else if (!country) {
				errorToast("Select valid country");
				return;
			} else if (!state) {
				errorToast("Select valid state");
				return;
			} else if (!city) {
				errorToast("Select valid city");
				return;
			} else if (!mobile) {
				errorToast("Enter valid mobile");
				return;
			} else if (mobile.startsWith('41') || mobile.startsWith('0')) {
				errorToast('Dont add 0 or country code.');
				return;
			} else if (!email) {
				errorToast("Enter valid email");
				return;
			} else if (!password) {
				errorToast("Enter valid password");
				return;
			}
			// else if (!confirmpassword) {
			// 	errorToast("Enter Confirm password");
			// 	return;
			// }
			// else if (password!=confirmpassword) {
			// 	errorToast("Password mismatching..!");
			// 	return;
			// }


			fetch('https://api.demoview.ch/api/members/signup', {
				method: 'post',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({
					name,
					email,
					phone: mobile,
					gender,
					country,
					state,
					city,
					password,
					address1,
					address2
				})
			}).then((res) => res.json()).then((response) => {
				if (response.status === 'error') {
					errorToast(response.message);
					return;
				}
				successToast(response.message);
				localStorage.setItem("memberid_reg", response.member.member_id);
				localStorage.setItem("token", response.token);
				localStorage.setItem("memberid", response.member.member_id);
				localStorage.setItem("username", response.member.name);
				localStorage.setItem("email1", response.member.email);
				const urlParams = new URLSearchParams(window.location.search);
				const myParam = urlParams.get('redirect_url');
				if (myParam) {
					window.location.href = './sign_otp?redirect_url=' + myParam;
				} else {
					window.location.href = './sign_otp';
				}
			}).catch(error => {
				console.log(error);
			});
		}
		function validatePhoneNumber() {
			var phoneNumber = document.getElementById('signupmobile').value.trim(); // Trim whitespace
			if (phoneNumber.startsWith('41') || phoneNumber.startsWith('0')) {
				alert('Please enter mobile without country code.');
			}
		}
	</script>
	<script>
		const prefix = "+41 ";

		// Initialize the input with the prefix
		document.getElementById('signupmobile').value = prefix;

		function handleInput(input) {
			// Ensure the prefix is always present
			if (!input.value.startsWith(prefix)) {
				input.value = prefix;
			}

			// Remove all non-digit characters (except the prefix)
			let value = input.value.replace(/\D/g, '');

			// Ensure the prefix is preserved
			value = prefix + value.slice(prefix.replace(/\D/g, '').length);

			// Update the input value
			input.value = value;
		}
	</script>

</body>

</html>