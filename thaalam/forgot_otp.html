<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- CSS -->
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css" />
    <link rel="stylesheet" href="css/bootstrap-grid.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/select2.min.css" />
    <link rel="stylesheet" href="css/plyr.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/members.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <!-- Favicons -->
    <link rel="icon" type="image/png" href="icon/favicon.png" sizes="32x32" />
    <title>Thaalam - verification</title>
    <meta name="robots" content="noindex" />
    <style>
        .select2-container {
            width: 100% !important;
            background: #ffffff;
            padding: 10px;
            border: 1px solid;
        }

        .mfp-iframe-holder .mfp-content {
            height: 100% !important;
        }

        .mfp-container {
            padding: 40px 15px !important;
        }

        a {
            text-decoration: none;
        }
    </style>


    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-KLC938NV');</script>
    <!-- End Google Tag Manager -->



</head>

<body style="background: url('img/background.jpg'); background-size: cover">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLC938NV" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- header -->
    <!-- header -->
    <!-- header -->

    <header class="header">

        <div class="header__content">
            <div class="header__logo">
                <a href="./">
                    <img src="img/thalam-logo.png" alt="" />
                </a>
            </div>

            <div id="commonnavbar" style="margin-right:10px;  text-align: end;"></div>

            <script>

            </script>

            <!-- <div id="commonnavbar2"  style="  text-align: end;"></div> -->

            <div class="header__action header__action--signin" style="width:55%;    margin-right: 30px;"
                id="commonnavbar3"></div>
            <!-- <div class="header__action-btn" style="width:75%;    margin-right: 35px;">
        <a class="header__action-btn" href="signin">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,4.65,18.76h0a10,10,0,0,0,14.7,0h0A10,10,0,0,0,12,2Zm0,18a8,8,0,0,1-5.55-2.25,6,6,0,0,1,11.1,0A8,8,0,0,1,12,20ZM10,10a2,2,0,1,1,2,2A2,2,0,0,1,10,10Zm8.91,6A8,8,0,0,0,15,12.62a4,4,0,1,0-6,0A8,8,0,0,0,5.09,16,7.92,7.92,0,0,1,4,12a8,8,0,0,1,16,0A7.92,7.92,0,0,1,18.91,16Z"></path></svg>
        </a>
      </div>
      <div id="commonnavbar3"></div> -->

            <a href="./contact">
                <div class="phone-number phone-number--below">
                    <img class="fa" src="icon/phone.png" />
                    <span style="color: #f60001">Reach Us</span> <br />
                    <span style="font-weight: initial">+41 79 288 22 71</span>
                </div>
            </a>
            <button class="header__btn" type="button">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>
    <!-- end header -->
    <!-- end sidebar -->
    <!-- sidebar -->
    <div class="sidebar" style="background: url('img/background.jpg'); background-size: cover">
        <!-- sidebar logo -->
        <div class="sidebar__logo">
            <a href="./"><img src="img/thalam-logo.png" alt="" /></a>
        </div>
        <!-- end sidebar logo -->

        <!-- sidebar nav -->
        <ul class="sidebar__nav" id="menucontent1">

        </ul>
        <!-- end sidebar nav -->
    </div>
    <!-- end sidebar -->

    <!-- end header -->

    <!-- main content -->
    <main class="main">
        <div class="container-fluid">
            <div class="row row--grid">
                <!-- breadcrumb -->
                <div class="col-12">
                    <ul class="breadcrumb">
                        <li class="breadcrumb__item"><a href="index">Home</a></li>
                        <li class="breadcrumb__item breadcrumb__item--active">
                            Signup
                        </li>
                    </ul>
                </div>
                <!-- end breadcrumb -->

                <!-- authorization form -->
                <div class="col-12 mt-4">
                    <div class="sign">
                        <div class="sign__content">
                            <form action="#" class="sign__form" style="max-width: 450px">
                                <!-- <a href="index" class="sign__logo">
									<img src="img/thalam-logo.png" alt="">
								</a> -->
                                <div class="main__title" style="margin-bottom: 23px">
                                    <h2>Enter Verification Code</h2>
                                </div>
                                <br />

                                <div class="sign__group">
                                    <input type="text" class="sign__input" id="otp" placeholder="Enter 6-Digit Code"
                                        oninput="numOnly(this.id);" maxlength="6"
                                        pattern="[0-9]{4}-[0-9]{4}-[0-9]{4}" />
                                </div>

                                <!-- <div class="sign__group sign__group--checkbox">
									<input id="remember" name="remember" type="checkbox" checked="checked">
									<label for="remember">I agree to the <a href="privacy">Privacy Policy</a></label>
								</div> -->

                                <button class="sign__btn" type="button" onclick="forgot()">
                                    Send
                                </button>

                                <span class="sign__text">Dont receive any code? <label onclick="resend();"
                                        style="color: #d50000;">Resend</label></span>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end authorization form -->
            </div>
        </div>
    </main>
    <!-- end main content -->

    <!-- footer -->
    <div id="commonfooter"></div>

    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/select2.min.js"></script>
    <script src="js/jquery.inputmask.min.js"></script>
    <script src="js/plyr.min.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript" src="js/menu.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script>
        window.onload = function () {
            menucontent();
            const email1 = localStorage.getItem("email1");
            const forgoterror = localStorage.getItem("forgoterror");
            if (forgoterror) {
                errorToast(forgoterror);
                localStorage.setItem("forgoterror", "");
            }
        };
        $(function () {
            $("#commonheader").load("./header");
            $("#commonfooter").load("./footer");
            setTimeout(() => {
                SetLogin1();
                SetLogout();
                // //SetUsername();
            }, 1000);
        });

        function forgot() {
            const otp = document.getElementById("otp").value;
            const email = localStorage.getItem("email1");
            // const memberid1 = localStorage.getItem("memberid1");
            //  console.log(mem);
            if (!otp) {
                errorToast("Enter valid OTP");
                return;
            }


            fetch("https://api.demoview.ch/api/members/verify-otp", {
                method: "post",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    email: email,
                    otp: otp
                }),
            })
                .then((res) => res.json())
                .then((response) => {
                    if (response.status === "error") {
                        errorToast(response.message);
                        return;
                    }
                    // errorToast(response.message);
                    localStorage.setItem("memberid_reg", "");
                    localStorage.setItem("toast_reg", response.message);
                    window.location.href = "./reset_password";
                });
        }


        function resend() {
            const email = localStorage.getItem("email1");

            if (!email) {
                errorToast("Email not found. Please sign up again.");
                return;
            }

            fetch("https://api.demoview.ch/api/members/forgot-otp", {
                method: "post",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    email: email
                }),
            })
                .then((res) => res.json())
                .then((response) => {
                    if (response.status === "error") {
                        errorToast(response.message);
                        return;
                    }
                    successToast(response.message);
                });
        }


    </script>
</body>

</html>