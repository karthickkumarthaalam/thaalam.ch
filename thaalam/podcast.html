<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://thaalam.ch/podcast">
    <meta property="og:title" content="Thaalam Podcasts | Listen to Engaging Audio Shows">
    <meta property="og:description"
        content="Explore our curated collection of Tamil podcasts by your favorite RJs — covering culture, music, and stories from around the world. Listen now!">
    <meta property="og:image" content="https://thaalam.ch/img/podcast-banner2.jpg">
    <meta property="og:image:alt" content="Thaalam Podcasts Banner">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Thaalam Podcasts | Listen to Engaging Audio Shows">
    <meta name="twitter:description"
        content="Explore our curated collection of Tamil podcasts by your favorite RJs — covering culture, music, and stories from around the world.">
    <meta name="twitter:image" content="https://thaalam.ch/img/podcast-banner2.jpg">


    <!-- CSS -->
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css" />
    <link rel="stylesheet" href="css/bootstrap-grid.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/select2.min.css" />
    <link rel="stylesheet" href="css/plyr.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/podcast.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Favicons -->
    <link rel="icon" type="image/png" href="icon/favicon.png" sizes="32x32" />
    <title>Thaalam - Podcast</title>
    <meta name="robots" content="noindex" />
    <style>
        .select2-container {
            width: 100% !important;
            background: #ffffff;
            padding: 10px;
            border: 1px solid;
        }

        .mfp-iframe-holder .mfp-content {
            height: 100% !important;
        }

        .mfp-container {
            padding: 40px 15px !important;
        }

        a {
            text-decoration: none;
        }
    </style>


    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-KLC938NV');</script>
    <!-- End Google Tag Manager -->



</head>

<body style="background: url('img/background.jpg'); background-size: cover">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLC938NV" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- header -->
    <!-- header -->
    <!-- header -->

    <header class="header">

        <div class="header__content">
            <div class="header__logo">
                <a href="./">
                    <img src="img/thalam-logo.png" alt="" />
                </a>
            </div>

            <div id="commonnavbar" style="margin-right:10px;  text-align: end;"></div>

            <script>

            </script>

            <!-- <div id="commonnavbar2"  style="  text-align: end;"></div> -->

            <div class="header__action header__action--signin" style="width:55%;    margin-right: 30px;"
                id="commonnavbar3">
            </div>
            <!-- <div class="header__action-btn" style="width:75%;    margin-right: 35px;">
        <a class="header__action-btn" href="signin">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,4.65,18.76h0a10,10,0,0,0,14.7,0h0A10,10,0,0,0,12,2Zm0,18a8,8,0,0,1-5.55-2.25,6,6,0,0,1,11.1,0A8,8,0,0,1,12,20ZM10,10a2,2,0,1,1,2,2A2,2,0,0,1,10,10Zm8.91,6A8,8,0,0,0,15,12.62a4,4,0,1,0-6,0A8,8,0,0,0,5.09,16,7.92,7.92,0,0,1,4,12a8,8,0,0,1,16,0A7.92,7.92,0,0,1,18.91,16Z"></path></svg>
        </a>
      </div>
      <div id="commonnavbar3"></div> -->

            <a href="./contact">
                <div class="phone-number phone-number--below">
                    <img class="fa" src="icon/phone.png" />
                    <span style="color: #f60001">Reach Us</span> <br />
                    <span style="font-weight: initial">+41 41 562 79 45</span>
                </div>
            </a>
            <button class="header__btn" type="button">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>
    <div class="sidebar" style="background: url('img/background.jpg'); background-size: cover">
        <!-- sidebar logo -->
        <div class="sidebar__logo">
            <a href="./"><img src="img/thalam-logo.png" alt="" /></a>
        </div>
        <!-- end sidebar logo -->

        <!-- sidebar nav -->
        <ul class="sidebar__nav" id="menucontent1">

        </ul>
        <!-- end sidebar nav -->
    </div>

    <main class="main">
        <div class="container-fluid">
            <div class="podcast-banner mb-4">
                <img src="img/podcast-banner2.jpg" alt="Thaalam Podcasts Banner" class="img-fluid rounded"
                    oncontextmenu="return false;">
            </div>
            <div class="page-header">
                <h1 class="page-title">Thaalam Podcasts</h1>
                <div class="podcast-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search podcasts...">
                </div>
            </div>
            <div id="podcast-list" class="podcast-list"></div>
            <div id="pagination" class="pagination"></div>
        </div>
    </main>

    <div id="commonfooter"></div>

    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/select2.min.js"></script>
    <script src="js/jquery.inputmask.min.js"></script>
    <script src="js/plyr.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/menu.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script>
        const API_URL = "https://api.demoview.ch/api/podcasts";
        const podcastList = document.getElementById("podcast-list");
        const pagination = document.getElementById("pagination");

        let podcastData = [];
        let currentPage = 1;
        const podcastsPerPage = 6;

        window.onload = function () {
            fetchAllPodcasts();
        };

        $(function () {
            $("#commonheader").load("./header");
            $("#commonfooter").load("./footer");
            menucontent();
            setTimeout(() => {
                SetLogin1();
                SetLogout();
            }, 1000);
        });

        function fetchAllPodcasts() {
            fetch(`${API_URL}?status=active&limit=1000`)
                .then(res => res.json())
                .then(result => {
                    podcastData = result.data.data;
                    renderPaginatedPodcasts(currentPage);
                    renderPagination(Math.ceil(podcastData.length / podcastsPerPage), currentPage);
                })
                .catch(error => {
                    console.error("Error fetching podcasts:", error);
                });
        }

        function renderPaginatedPodcasts(page) {
            const startIndex = (page - 1) * podcastsPerPage;
            const endIndex = startIndex + podcastsPerPage;
            const paginatedPodcasts = podcastData.slice(startIndex, endIndex);
            renderPodcasts(paginatedPodcasts);
        }

        function renderPodcasts(podcasts) {
            if (podcasts.length === 0) {
                podcastList.classList.add("no-results-active");
                podcastList.innerHTML = `
                  <div class="no-results">
                    <h3>No podcasts found</h3>
                    <p>Try adjusting your search keywords or browse other episodes.</p>
                  </div>
                `;
                pagination.innerHTML = "";
                return;
            }

            if (podcastList.classList.contains("no-results-active")) {
                podcastList.classList.remove("no-results-active");
            }

            podcastList.innerHTML = podcasts.map(podcast => {
                const audioStreamUrl = podcast.audio_drive_file_id
                    ? `https://api.demoview.ch/api/podcasts/stream-audio/${podcast.audio_drive_file_id}`
                    : "";

                const date = new Date(podcast.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });

                const tagsHtml = podcast.tags.slice(0, 3)
                    .map(tag => `<span class="podcast-list__tag">${tag}</span>`)
                    .join('');

                const reactions = podcast.reactions || {};
                const likeCount = reactions.like || 0;
                const loveCount = reactions.love || 0;
                const clapCount = reactions.clap || 0;

                let reactionsHtml = "";

                if (likeCount > 0 || loveCount > 0 || clapCount > 0) {
                    reactionsHtml = `
                        <div class="podcast-reactions">
                          ${likeCount > 0 ? `<span><i class="fas fa-heart" style="color: #e60505"></i>  ${likeCount}</span>` : ""}
                        </div>
                  `;
                }


                return `
                      <div class="podcast-card">
                        <div class="podcast-card__date">
                          <i class="fas fa-calendar-alt"></i> ${formattedDate}
                        </div>

                        <h3 class="podcast-card__title">${podcast.title}</h3>

                        <div class="podcast-card__meta">
                          <div><i class="fas fa-user"></i> <strong>Published By:</strong> ${podcast.rjname}</div>
                          <div><i class="fas fa-microphone"></i> <strong>Content:</strong> ${podcast.content}</div>
                        </div>

                        <div class="podcast-card__tags">
                          ${tagsHtml}
                        </div>

                          <div class="podcast-card__footer">
                              ${reactionsHtml}
                              <a href="podcast-details?id=${podcast.id}" class="podcast-card__button ${reactionsHtml === "" ? 'only-button' : ''}">
                                <i class="fas fa-play"></i> Listen Now
                              </a>
                            </div>
                      </div>
                    `;
            }).join('');
        }

        function renderPagination(totalPages, current) {
            pagination.innerHTML = "";

            if (totalPages <= 1) {
                return;
            }

            if (current > 1) {
                pagination.innerHTML += `<button onclick="changePage(${current - 1})">&laquo; Prev</button>`;
            }

            for (let i = 1; i <= totalPages; i++) {
                pagination.innerHTML += `<button onclick="changePage(${i})" class="${i === current ? 'active' : ''}">${i}</button>`;
            }

            if (current < totalPages) {
                pagination.innerHTML += `<button onclick="changePage(${current + 1})">Next &raquo;</button>`;
            }
        }

        function changePage(page) {
            currentPage = page;
            renderPaginatedPodcasts(currentPage);
            renderPagination(Math.ceil(podcastData.length / podcastsPerPage), currentPage);
        }

        window.addEventListener("DOMContentLoaded", function () {
            const searchInput = document.querySelector(".podcast-search input");
            searchInput.addEventListener("keyup", function () {
                const searchValue = this.value.trim().toLowerCase();
                if (searchValue === "") {
                    renderPaginatedPodcasts(currentPage);
                    renderPagination(Math.ceil(podcastData.length / podcastsPerPage), currentPage);
                    return;
                }

                const filteredPodcasts = podcastData.filter(podcast =>
                    podcast.title.toLowerCase().includes(searchValue) ||
                    podcast.rjname.toLowerCase().includes(searchValue) ||
                    podcast.content.toLowerCase().includes(searchValue) ||
                    podcast.tags.some(tag => tag.toLowerCase().includes(searchValue))
                );

                renderPodcasts(filteredPodcasts);
                pagination.innerHTML = "";
            });
        });

    </script>


</body>

</html>